<% if notice %>
    <p id="notice"><%= notice %></p>
<% end %>

<h1>Tools & Materials Catalogue</h1>

<% @products.each do |product| %>
    <div class="entry">
      <%= image_tag(product.image_url) %>
      <h3><%= product.title %></h3>
      <%= sanitize(product.description) %>
      <p>Category:<%= product.category_name %></p>
      <div class="price_line">

        <!--
        # Date 15.07.12
        # @author John McCormack, x12100323
        # @reference http://stackoverflow.com/questions/8416587/rails-number-to-currency-foreign-currencies-query
         -->
        <span class="price"><%= number_to_currency(product.price, :unit => "â‚¬") %></span>

        <% if signed_in? %>
            <%= button_to 'Add to Basket', line_items_path(product_id: product) %>
        <% else %>
            <p><%= button_to 'To order, please sign in or create an account', signin_path %></p>

        <% end %>

      </div>

    </div>

<% end %>
<br/>
<%= form_tag products_path, :method => 'get' do %>
    <p>
      <%= text_field_tag :search_query,
                         params[:search_query] %>
      <%= submit_tag "Search", :name => nil %>
    </p>
<% end %>
